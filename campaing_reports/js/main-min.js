!function(p){var l,d,c,a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],t=p(".web-item-wrapper").clone(),o=1,e=window.location.href,f=[],h={randomValue:function(e,t){return Math.round(Math.random()*(t-e)+e)},generateRandomData:function(e){for(var t=[],o=0;o<e;o++)t[o]=h.randomValue(20,240);return t},getDateDiff:function(e,t){var o=Math.abs(e.getTime()-t.getTime());return Math.ceil(o/864e5)},getDateInterval:function(e,t){var o=[];f=[];var n=h.getDateDiff(e,t);if(n<=1){var s=new Date;t=0==n?s.getHours():24;for(var r=0;r<t;r++)o.push(r+":00")}else for(;e<=t;){o.push(e.getDate());var s=e.getDate().toString()+" "+a[e.getMonth()]+" "+e.getFullYear();f.push(s),e.setDate(e.getDate()+1)}return o},transparentize:function(e,t){var o=void 0===t?.5:1-t;return Chart.helpers.color(e).alpha(o).rgbString()},isMobile:function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)}},n;function s(){p("body").hasClass("collapsed")||(p(window).width()<=1024?p("body").addClass("navbar-collapse"):p("body").removeClass("navbar-collapse"))}function r(){p("body").toggleClass("navbar-collapse").toggleClass("collapsed",p("body").hasClass("navbar-collapse"))}function i(e){var t=p(this).attr("href");p(this).hasClass("popup-trigger")||p(this).parent().toggleClass("active"),p(this).parent().hasClass("has-sub")||s(),"index.html"==t&&O()}function u(e){p(this).addClass("active").siblings().removeClass("active"),W()}p(window).on("resize",s),p(document).on("click",".navbar a",i),p(document).on("click",".tabs li",u),p(document).on("click",".popup-trigger",z),p(document).on("click",".popup-wrapper, .popup-wrapper .close-btn",B),p(document).on("click",".popup-wrapper .btn-copy",A),p(document).on("click",".popup-wrapper .add-web-btn",H),p(document).on("click",".popup-wrapper .rm-web-btn",T),p(document).on("click",".burger",r),p(document).on("click",".dropdown, .slide-panel",_),p(document).on("click",".dropdown:not(.just-info) a",I),p(document).on("click",P),p(document).on("click",".slide-panel .slide-menu",function(e){e.stopPropagation()}),p(document).on("click",".form-submit",E),p(document).on("click","#reportrange",Q),p(document).on("click",".bell-trigger",Y),p(document).on("click",".table-ntfs tr",G),p(document).on("click",".panel-header .toggle",R),p(document).on("click",".help-triggers",N),p(document).on("keyup",".search-input",j),p(document).on("click",".fd-btn",g),p(document).on("keyup",".filter-dropdown .search-input input",w),p(document).on("click",".filter-dropdown .single-res",C),p(document).on("click",".filter-dropdown .rm-box-btn",k),p(document).on("click",".filter-dropdown .new-filter",x),p(document).on("click",".filter-dropdown .rm-btn",y),p(document).on("change",".filter-dropdown .check-option input",b),p(document).on("click",".filter-dropdown .clear-search",F),p(document).on("click",".filter-dropdown .main-mf",D),p(window).on("scroll",M),s();var m=p(".template-filter").clone();function g(){p(this).closest(".filter-dropdown").toggleClass("open");var e=p(this).closest(".filter-dropdown").offset().top,t=p(this).closest(".filter-dropdown").offset().left,o=50;p(this).closest(".filter-dropdown").find(".fd-menu").css("top",e-p(window).scrollTop()+45),(t<350||p(window).width()<=1260)&&(o=0),p(this).closest(".filter-dropdown").find(".fd-menu").css("left",t-o),b(this)}function v(e){e.target.closest(".filter-dropdown")||p(".filter-dropdown").removeClass("open")}function b(e){if(n=p(e).closest(".filter-dropdown").find(":checked"),"change"==e.type)return n=p(e.target).closest(".filter-dropdown").find(":checked"),void p(e.target).closest(".filter-dropdown").find(".fd-btn").text("Filters ("+n.length+")");p(e).closest(".filter-dropdown").find(".fd-btn").text("Filters ("+n.length+")")}function w(){var e=p(this).val(),t=p(this).closest(".filter-wrapper").find(".search-res-wrapper"),o=p(this).closest(".filter-wrapper").find(".clear-search");2<e.length?(t.addClass("active"),o.show()):(t.removeClass("active"),o.hide())}function C(){var e=p(this).text(),t=p(this).closest(".filter-wrapper").find(".search-res-wrapper"),o=p(this).closest(".filter-wrapper").find(".search-input input"),n=p(this).closest(".filter-wrapper").find(".flex-top");rm_box_wrapper=p(this).closest(".filter-wrapper").find(".rm-box-wrapper"),in_ex_class=p(this).closest(".filter-wrapper").find(".th-s-panel button"),o.val(e),t.removeClass("active"),n.addClass("active");var s="include";in_ex_class.hasClass("exclude")&&(s="exclude"),rm_box_wrapper.append('<p class="rm-box '+s+'">'+e+'<span class="rm-box-btn"></span></p>'),p(this).closest(".filter-wrapper").find(".rm-btn").css("display","inline-block")}function k(e){e.stopPropagation();var t=p(this).parent(),o=p(this).closest(".filter-wrapper").find(".search-res-wrapper"),n=p(this).closest(".filter-wrapper").find(".flex-top"),s=p(this).closest(".filter-wrapper").find(".rm-box");t.remove(),1==s.length&&(n.removeClass("active"),p(this).closest(".filter-wrapper").find(".rm-btn").hide())}function x(e){e.stopPropagation();var t=p(this).text(),o=p(this).closest(".filter-dropdown").find(".fdm-body"),n=m.clone(),s;p(this).hasClass("other")&&(s="other"),p(this).remove(),n.addClass(s),n.find(".filter-name").text(t),n.find(".check-option input").attr("id","fc-"+t),n.find(".check-option input").attr("name","fc-"+t),n.find(".check-option label").attr("for","fc-"+t),o.append(n),p(".filter-dropdown").find(".mf-inner").hide(),b(n)}function y(e){e.stopPropagation();var t=p(this).closest(".filter-wrapper"),o=t.find(".filter-name").text(),n=p(this).closest(".filter-dropdown").find(".fdm-footer"),s=p(this).closest(".filter-dropdown").find(".mf-inner");t.remove(),t.hasClass("other")?s.append('<a href="javascript:void(0)" class="new-filter other">'+o+"</a>"):n.append('<a href="javascript:void(0)" class="new-filter">'+o+"</a>"),p(".filter-dropdown").find(".mf-inner").hide(),b(n)}function F(){p(this).parent().find("input").val(""),p(this).closest(".filter-wrapper").find(".search-res-wrapper").removeClass("active")}function D(){p(this).parent().find(".mf-inner").is(":visible")?p(this).parent().find(".mf-inner").hide():p(this).parent().find(".mf-inner").css("display","block")}function M(){var e=p(".filter-dropdown").offset().top,t=p(window).scrollTop();p(".filter-dropdown .fd-menu").css("top",e-t+45)}function z(e){e.stopPropagation();var t=p(this);p(".popup-wrapper").addClass("active"),t.hasClass("btn-view-tag")?p(".popup-tags").addClass("active"):t.hasClass("btn-delete")?p(".popup-delete").addClass("active"):t.hasClass("btn-comments")?p(".popup-comments").addClass("active"):t.hasClass("btn-new-user")?p(".popup-new-user").addClass("active"):p(".popup-edit").addClass("active")}function B(e){e.target===this&&p(".popup-wrapper, .popup-container").removeClass("active")}function S(){p(".popup-wrapper, .popup-container").removeClass("active")}function A(){var e;p(this).closest(".form-field").find(".copy-target").select(),document.execCommand("copy")}function H(){var e=t.clone();return o=o+=1,e.find(".required").remove(),e.find(".web-name").attr("name","web-page"+o).attr("id","web-page"+o).addClass("not-required"),e.find("label").attr("for","web-page"+o),e.appendTo(".web-pages-container"),!1}function T(){var e;p(this).closest(".web-item-wrapper").remove()}function R(){var e=p(this).closest(".panel");e.hasClass("panel-help")&&p(this).hasClass("max")?(p(".panel-body").slideUp("fast"),p(".panel-header .toggle").addClass("max"),p(this).removeClass("max")):p(this).toggleClass("max"),e.find(".panel-body").slideToggle("fast")}function _(e){e.stopPropagation(),(p(this).closest(".nested").length=0)&&p(".open").not(this).removeClass("open"),p(e.target).hasClass("search-input")||p(this).toggleClass("open")}function P(e){p(".dropdown.open, .slide-panel.open, .notifications-dropdown.open").each(function(){e.target!==this&&p(".open").removeClass("open")}),e.target.closest(".filter-dropdown")||p(".filter-dropdown").removeClass("open")}function Y(e){e.stopPropagation(),p(this).removeClass("new"),p(".notifications-dropdown").toggleClass("open")}function I(e){if(e.preventDefault(),p(this).hasClass("back-btn"))return p(this).closest(".nested").toggleClass("open").siblings().removeClass("open"),p(".nested").show(),!1;if(p(this).parent().hasClass("nested"))return p(this).parent().toggleClass("open").siblings().removeClass("open"),p(".nested:not(.open)").hide(),!1;var t=p(this).closest(".dropdown");p(this).closest(".dropdown").find(".selected").removeClass("selected"),p(this).parent().toggleClass("selected"),t.find("button").html(p(this).html()),t.val(p(this).data("value")),"include"==p(this).text().toLowerCase()?(t.find("button").removeClass("exclude").addClass("include"),p(this).closest(".flex-top").find(".rm-box").removeClass("exclude").addClass("include")):"exclude"==p(this).text().toLowerCase()&&(t.find("button").removeClass("include").addClass("exclude"),p(this).closest(".flex-top").find(".rm-box").removeClass("include").addClass("exclude"))}function j(){var e=p(this).val(),t=p(this).closest(".slide-menu").find(".inner-list label");if(1<=e.length){p(this).closest(".slide-menu").find(".inner-list li").hide();for(var o=0;o<t.length;o++)-1<p(t[o]).text().toLowerCase().indexOf(e)&&(console.log(p(t[o]).text()),p(t[o]).closest("li").show())}else p(this).closest(".slide-menu").find(".inner-list li").show()}function O(){var e=moment().subtract(29,"days"),t=moment();function o(e,t){p("#reportrange .from span").html(e.format("DD/MM/YYYY")),p("#reportrange .to span").html(t.format("DD/MM/YYYY")),l=e._d,d=t._d,null!=c?(W(),L()):q()}p("#reportrange").daterangepicker({startDate:e,endDate:t,ranges:{Hoy:[moment(),moment()],Ayer:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 días":[moment().subtract(6,"days"),moment()],"Mes actual":[moment().startOf("month"),moment().endOf("month")],"Mes pásado":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{customRangeLabel:"Fecha personalizada"},linkedCalendars:!1,alwaysShowCalendars:!0},o),o(e,t)}function W(e){var t=c.config.data,o=h.getDateInterval(l,d);t.labels=o;for(var n=0;n<t.datasets.length;n++)t.datasets[n].data=h.generateRandomData(o.length);return c.update(),!1}function L(){p(".chart-months .from-month").html(a[l.getMonth()]),p(".chart-months .to-month").html(a[d.getMonth()])}function q(){if(L(),p("#chart").length){var e=["#6335d2","#ff4e6a"],t=p(window).width()<1024?4:6,o={labels:h.getDateInterval(l,d),datasets:[{label:"Impressions",data:[80,135,145,130,140,220,240,230,205,135,230,210,127,140,122,80,135,145,130,140,220,240,230,205,135,230,210,127,140,122],fill:!0,lineTension:.3,backgroundColor:h.transparentize(e[0],.65),borderColor:e[0],pointRadius:t/1.5,borderWidth:1.5,pointBorderColor:"transparent",pointBackgroundColor:e[0],pointBorderWidth:t/t,pointHoverRadius:t,pointHoverBackgroundColor:"#FFF",pointHoverBorderWidth:t/2,pointHoverBorderColor:e[0]},{label:"Clicks",data:[30,203,150,210,120,130,205,150,130,100,207,230,220,200,150,30,203,150,210,120,130,205,150,130,100,207,230,220,200,150],fill:!0,lineTension:.3,backgroundColor:h.transparentize(e[1],.65),borderColor:e[1],pointRadius:t/1.5,borderWidth:1.5,pointBorderColor:"transparent",pointBackgroundColor:e[1],pointBorderWidth:t/t,pointHoverRadius:t,pointHoverBackgroundColor:"#FFF",pointHoverBorderWidth:t/2,pointHoverBorderColor:e[1]}]},n,s,r,a={defaults:{defaultFontColor:"#424853",defaultFontSize:"14",defaultFontFamily:"Roboto"},layout:{padding:{left:0,right:p(window).width()<1024?10:56,top:0,bottom:p(window).width()<1024?25:0}},scales:{xAxes:[{display:!(p(window).width()<1024),scaleLabel:{display:!0},ticks:{fontSize:13,fontColor:"#424853",padding:10}}],yAxes:[{display:!0,ticks:{fontColor:"#424853",fontSize:14,padding:10,max:250,beginAtZero:!0,callback:function(e,t,o){return"$"+e}}}]},animation:!1,spanGaps:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0,onHover:function(e,t){p("#chart").css("cursor",t[0]?"pointer":"default")}},legend:{display:!1},legendCallback:function(e){var t=[],o=c.data.datasets;t.push('<ul class="legend-'+c.id+'">');for(var n=0;n<o.length;n++)o[n].label&&t.push('<li data-index="'+n+'">'+o[n].label+"</li>");return t.push("</ul>"),t.join("")},tooltips:{yPadding:15,xPadding:15,displayColors:!1,backgroundColor:"#fff",titleFontSize:14,titleFontStyle:"normal",titleFontColor:"#424853",footerFontColor:"#424853",footerFontStyle:"normal",bodyFontColor:"#ff166b",bodyFontSize:22,cornerRadius:2,borderWidth:1,borderColor:"#ebeff6",callbacks:{title:function(e,t){var o;return 0===e[0].datasetIndex?o=t.datasets[1].label:1===e[0].datasetIndex?o=t.datasets[0].label:void 0},label:function(e,t){return 0===e.datasetIndex?t.datasets[0].data[e.index]:1===e.datasetIndex?t.datasets[1].data[e.index]:void 0},footer:function(e,t){var o=e[0].index;return f[o]}}}};function i(e,t,o,n){var s=!p(".chart-legend li").hasClass("active"),r=s||e!=t?"transparent":h.transparentize(o[e],.75),a=s||e==t?o[e]:h.transparentize(o[e],.75),i=s||e==t?"#FFF":a,l=s||e==t?o[e]:"transparent";n.dataset.custom=n.dataset.custom||{},n.dataset.custom.borderColor=a,n.dataset.custom.backgroundColor=r;for(var d=n.data,c=0;c<d.length;c++)d[c].custom=d[c].custom||{},d[c].custom.borderColor=i,d[c].custom.backgroundColor=l}c=new Chart(p("#chart"),{type:"line",data:p(".panel-chart").hasClass("panel-publishers")?o:advData,options:a}),p(".chart-legend").html(c.generateLegend())}}function E(e){e.preventDefault();var t=p(this).closest("form").find(".form-field>input:not(.not-required)").filter(function(){return""===this.value?p(this).addClass("error"):p(this).removeClass("error"),""===this.value}),o=p(this).closest("form").find(".dropdown").filter(function(){return 0==p(this).find(".selected").length?(p(this).addClass("error"),1):(p(this).removeClass("error"),0)}),n=p(this).closest("form").find(".checkboxes").filter(function(){var e=p(this).find("input[type=checkbox]").is(":checked");return 0==e?p(this).closest(".slide-panel").find("button").addClass("error"):p(this).closest(".slide-panel").find("button").removeClass("error"),e});1<p(this).closest("form").find(".error").length?p(this).closest("form").find(".check-message").text("Ops, revisa los campos marcados en rojo por favor...").addClass("error"):(p(this).closest("form").find(".check-message").text("").removeClass("error"),J("success"),S())}function J(e){p(".action-modals."+e).addClass("active"),setTimeout(function(){p(".action-modals").removeClass("active")},2e3)}function Q(){if(p("#reportrange").toggleClass("active"),p("body").hasClass("reports")){var e=p("#reportrange").offset().left;p(".daterangepicker").css("left",e+"px")}}function V(){for(var e="0123456789ABCDEF",t="#",o=0;o<6;o++)t+=e[Math.floor(16*Math.random())];return t}function G(){window.location="notification-single.html"}function N(){p(".help-triggers").removeClass("active"),p(this).addClass("active")}m.removeClass("template-filter"),p(".template-filter").remove(),p(".select-all").on("change",function(e){var t=p(this).closest(".checkboxes");t.find(".check-option.hidden").toggleClass("off"),t.find("[type=checkbox]").prop("checked",p(this).prop("checked"))}),p(".checkboxes [type=checkbox]").on("change",function(){var e=p(this),t=e.closest(".checkboxes");t.find(".select-all").prop("checked",function(){return p(this).prop("checked")&&e.prop("checked")||t.find(":checked:not(.select-all)").length==t.find("[type=checkbox]:not(.select-all)").length});var o=t.find(".select-all").prop("checked")?"All":t.find(":checked").length;if(t.prev("button:not(.inner-text)").html("Selected: "+o),t.prev("button.inner-text, .button.inner-text").find(".text").html("("+o+")"),0<t.closest(".nested").length){var n=t.closest(".dropdown").find("button.inner-text:first .text"),s=t.closest(".dropdown-menu").find(":checked:not(.select-all)").length;n.text("("+s+")")}}),(p("body").hasClass("home")||p("body").hasClass("reports"))&&O(),jQuery().stupidtable&&p("table").stupidtable({date:function(e,t){var o=e.split("-"),n=t.split("-");return new Date(o[2],o[1]-1,o[0]).getTime()<new Date(n[2],n[1]-1,n[0]).getTime()},currency:function(e,t){var e,t;return(e=parseFloat(e.replace(/\u20ac /g,"").replace(/[,.]/g,"")))-(t=parseFloat(t.replace(/\u20ac /g,"").replace(/[,.]/g,"")))},ratio:function(e,t){var o=e.split(":");o=o[0]/o[1];var n=t.split(":");return o-(n=n[0]/n[1])}}),p("body").hasClass("user-admins")&&p(".user-img").filter(function(){p(this).css("backgroundColor",V())})}(jQuery);